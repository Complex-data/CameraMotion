Last date of modification: 2015-06-01

===============================================================================
INTRODUCTION
===============================================================================
This is the Matlab code connected to the project 

'Reconstruction of ego-motion using a moving camera' 
by Johanna Ask, Raman Haddad, Felix Held and Daniel Pihlquist

for the course

TMS016, Statistical Image Analysis.

A theoretical discussion and description of the techniques used in the code can be found in the report accompanying this code.

===============================================================================
OVERVIEW
===============================================================================

There are several files provided...

...for Kalman filtering

- unscented_kalman_filter.m
	An implementation of the Unscented Kalman Filter.

- systemFunc.m
	The system function used in the Kalman Filter.

- measFunc.m
	The measurement function used in the Kalman Filter.

...for feature detection and matching

- findAndExtractELASFeatures.m
	Here the logic behind the feature detection with the ELAS inspired algorithm is contained.

- nonMaximumSuppression.m
	Used in findAndExtractELASFeatures.m to find local maxima and minima.

- findMatches.m
	General matching in a given window for the ELAS inspired features.

- findMatchesLeftRight.m
	Matching in the special case of a pair of left / right stereo images.

...for feature extraction

Since feature extraction is time intensive we wrote a dedicated script for it. The positions of the matched features found are saved to the hard drive.

- extract_mineigen_circle_matches.m
	Extract the features while using the Shi Tomasi algorithm.

- extract_elas_circle_matches.m
	Extract the features while using the ELAS inspired algorithm.

...for motion estimation

- extract_motion.m
	Here the actual algorithm comes to work. We estimate the motion updates and integrate the motion using the Kalman Filter. The motion is then saved to the hard drive.

- extract_motion_ref.m
	Extracting the ego motion using libviso (Andreas Geiger's reference implementation which we compare our results to). The motion is then saved to the hard drive.

...for plotting

- compare_results.m
	This script plots the GPS ground truth, the result of our two implementations and the result of the reference implementation.

===============================================================================
USAGE
===============================================================================

To use the code a sequence of steps has to be done:

1) One first has to extract the features from the desired image sequence. After setting the necessary paths in extract_mineigen/elas_circle_matches.m the features get extracted and saved to a file.

2) Now the motion needs to be extracted. To do so the file extract_motion.m has to be executed with the MinEigen or ELAS feature file extracted before.

3) The reference motion needs to be extracted by using extract_motion_ref.m. (Observe that this needs libviso2 from http://www.cvlibs.net/software/libviso/ with compiled Matlab mex files.)

4) Now a comparison plot can be generated by running compare_results.m.